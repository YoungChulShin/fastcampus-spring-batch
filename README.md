# 저장소 설명
fastcampus 스프링 배치 강의 실습 저장소

# 메모
스프링 배치 활성화
```
@EnableBatchProcessing 애노테이션 사용
```

Job
```
스프링 배치의 작업 단위
```

Step
```
job의 실행 단위
```

Step은 Task와 Chunk로 구분할 수 있다
- Task: 한번에 실행
- Chunk: 나누어서 실행
   - ItemReader, ItemProcessor, ItemWriter

DB Table
- `org.springframework.batch:spring-batch-core`에서 확인 가능하다

Job 실행
- Parameter 값이 들어가는데, 1개의 잡은 동일한 파라미터로 새로 시작될 수 없다. 
- 재실행된다

JobContext/StepContext
- JobContext는 job에서 관리하는 context로 step이 이 값을 공유해서 사용할 수 있다
- StepContext는 step에서 관리하는 context로 step끼리 이 값을 공유해서 사용할 수 없다

Job 실행 정보 
```


# batch_job_instance
+---------------+-------+--------+--------------------------------+
|JOB_INSTANCE_ID|VERSION|JOB_NAME|JOB_KEY                         |
+---------------+-------+--------+--------------------------------+
|3              |0      |shareJob|853d3449e311f40366811cbefb3d93d7|
+---------------+-------+--------+--------------------------------+

# batch_job_execution
+----------------+-------+---------------+--------------------------+--------------------------+--------------------------+---------+---------+------------+--------------------------+--------------------------+
|JOB_EXECUTION_ID|VERSION|JOB_INSTANCE_ID|CREATE_TIME               |START_TIME                |END_TIME                  |STATUS   |EXIT_CODE|EXIT_MESSAGE|LAST_UPDATED              |JOB_CONFIGURATION_LOCATION|
+----------------+-------+---------------+--------------------------+--------------------------+--------------------------+---------+---------+------------+--------------------------+--------------------------+
|3               |2      |3              |2023-01-03 09:27:49.986000|2023-01-03 09:27:50.024000|2023-01-03 09:27:50.227000|COMPLETED|COMPLETED|            |2023-01-03 09:27:50.229000|NULL                      |
+----------------+-------+---------------+--------------------------+--------------------------+--------------------------+---------+---------+------------+--------------------------+--------------------------+

# batch_job_execution_context
+----------------+---------------------------------------------------------------+------------------+
|JOB_EXECUTION_ID|SHORT_CONTEXT                                                  |SERIALIZED_CONTEXT|
+----------------+---------------------------------------------------------------+------------------+
|3               |{"@class":"java.util.HashMap","jobKey":"job execution context"}|NULL              |
+----------------+---------------------------------------------------------------+------------------+

# batch_step_execution
+-----------------+-------+----------+----------------+--------------------------+--------------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+--------------------------+
|STEP_EXECUTION_ID|VERSION|STEP_NAME |JOB_EXECUTION_ID|START_TIME                |END_TIME                  |STATUS   |COMMIT_COUNT|READ_COUNT|FILTER_COUNT|WRITE_COUNT|READ_SKIP_COUNT|WRITE_SKIP_COUNT|PROCESS_SKIP_COUNT|ROLLBACK_COUNT|EXIT_CODE|EXIT_MESSAGE|LAST_UPDATED              |
+-----------------+-------+----------+----------------+--------------------------+--------------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+--------------------------+
|3                |3      |shareStep |3               |2023-01-03 09:27:50.078000|2023-01-03 09:27:50.119000|COMPLETED|1           |0         |0           |0          |0              |0               |0                 |0             |COMPLETED|            |2023-01-03 09:27:50.120000|
|4                |3      |shareStep2|3               |2023-01-03 09:27:50.172000|2023-01-03 09:27:50.209000|COMPLETED|1           |0         |0           |0          |0              |0               |0                 |0             |COMPLETED|            |2023-01-03 09:27:50.211000|
+-----------------+-------+----------+----------------+--------------------------+--------------------------+---------+------------+----------+------------+-----------+---------------+----------------+------------------+--------------+---------+------------+--------------------------+

# batch_step_execution_context
# short_context: json string
+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+
|STEP_EXECUTION_ID|SHORT_CONTEXT                                                                                                                                                                                                                                                    |SERIALIZED_CONTEXT|
+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+
|3                |{"@class":"java.util.HashMap","stepKey":"step execution context","batch.taskletType":"study.spring.batch.springbatchexample.part2.SharedConfiguration$$Lambda$594/0x0000000801005d50","batch.stepType":"org.springframework.batch.core.step.tasklet.TaskletStep"}|NULL              |
|4                |{"@class":"java.util.HashMap","batch.taskletType":"study.spring.batch.springbatchexample.part2.SharedConfiguration$$Lambda$595/0x0000000801005f70","batch.stepType":"org.springframework.batch.core.step.tasklet.TaskletStep"}                                   |NULL              |
+-----------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+------------------+

```